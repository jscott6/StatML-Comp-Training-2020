An example solution is provided by Hadley Wickham, and is available [here](http://adv-r.had.co.nz/Rcpp.html#rcpp-case-studies). 